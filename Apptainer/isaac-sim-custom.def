# Header
Bootstrap: docker
From: nvcr.io/nvidia/isaac-sim:4.0.0


%post
    apt-get update && \\
    DEBIAN_FRONTEND=noninteractive apt-get install -yq --no-install-recommends \\
    # Install necessary utilities
        git && \\
    apt-get clean && rm -rf /var/lib/apt/lists/* \\

    mkdir -p /workspace

    # Install necessary Python packages using Isaac Sim's Python environment
    /isaac-sim/python.sh -m pip install tensorflow
    /isaac-sim/python.sh -m pip install torch

    cd workspace/omniisaacgymenvs
    # Clone and install the omniisaacgymenvs repo
    git clone https://github.com/yourusername/OmniIsaacGymEnvs.git /workspace/omniisaacgymenvs/OmniIsaacGymEnvs
    cd /workspace/OmniIsaacGymEnvs
    /isaac-sim/python.sh -m pip install -e .

    cd workspace/omniisaacgymenvs
    # Clone and install skrl
    git clone https://github.com/Toni-SM/skrl.git /workspace/omniisaacgymenvs/skrl
    cd /workspace/skrl
    /isaac-sim/python.sh -m pip install .[torch]

    # Clone your custom repo (Options_In_Simulation)
    git clone https://github.com/meesjansen/Options_In_Simulation.git /workspace/omniisaacgymenvs/Options_In_Simulation
    cd /workspace/Options_In_Simulation
    /isaac-sim/python.sh -m pip install -e .

%runscript
    # This section allows you to define a default behavior when the container is run
    echo "Starting training..."
    cd /workspace/omniisaacgymenvs/Options_In_Simulation
    # /isaac-sim/python.sh train_DQN.py
